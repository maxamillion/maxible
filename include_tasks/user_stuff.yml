---
# Meant to be used with import_tasks
#
- name: pip user install some stuff
  pip:
    state: present
    name:
      - ptpython
      - virtualenvwrapper
      - tox
      - httpie
      - flake8
      - pep8
      - pyflakes
      - pylint
      - black
      - q
      - sncli
      - pipenv
      - poetry
      - podman-compose
    executable: 'pip3'
    extra_args: '--user'

- name: check for local poetry bash completions
  stat:
    path: ~/.local/poetry.bash-completion
  register: poetry_stat

- name: generate local poetry bash completions if they aren't present
  shell: poetry completions bash > ~/.local/poetry.bash-completion
  when: not poetry_stat.stat.exists

- name: gem user install tmuxinator
  gem:
    state: present
    name: tmuxinator
    user_install: yes

- name: Add the flathub flatpak repository remote to the user installation
  flatpak_remote:
    name: flathub
    state: present
    flatpakrepo_url: https://flathub.org/repo/flathub.flatpakrepo
    method: user


- name: install flatpaks
  flatpak:
    name: '{{ item }}'
    state: present
    method: user
  loop:
    - 'com.discordapp.Discord'
    - 'com.github.johnfactotum.Foliate'
    - 'org.videolan.VLC'
    - 'org.fedoraproject.MediaWriter'
    - 'org.telegram.desktop'
    - 'info.mumble.Mumble'
    - 'com.slack.Slack'
    - 'org.libreoffice.LibreOffice'
    - 'org.gimp.GIMP'

